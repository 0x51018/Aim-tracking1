<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exercise1</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="libraries/p5.min.js"></script>
  <script src="libraries/p5.sound.min.js"></script>
  <script>
    function setup() {
      width = windowWidth, height = windowHeight;
      var canvas = createCanvas(width, height);
      frameRate(240);
      id1 = 20, id2 = parseInt(id1 * windowHeight / windowWidth);
      r = sqrt(40/id2);

      count = new Array(id1)
      for(let i = 0; i < count.length; i++) count[i] = new Array(id2);
      for(let i = 0; i < id1; i++) for(let j = 0; j < id2; j++) count[i][j] = 0;
    }

    function draw() {
      if(windowWidth != canvas.width/2 || windowHeight != canvas.height/2) setup();
      //background(255/sqrt(id/10));
      background(25);
      for(let i = 0; i < id1; i++) for(let j = 0; j < id2; j++){
        noStroke();
        if(count[i][j] > 0) count[i][j] -= 10;
        fill(count[i][j]);
        rect(i*(width/id1)+r, j*(height/id2)+r, width/id1-2*r, height/id2-2*r, 3*r);
      }
      if(mouseX < width & mouseY < height) count[parseInt(mouseX/(width/id1))][parseInt(mouseY/(height/id2))] = min(255, count[parseInt(mouseX/(width/id1))][parseInt(mouseY/(height/id2))] + 200);
    }
  </script>
</head>

<body bgcolor='black'>
  <div id="canvasdiv"></div>
</body>

</html>
